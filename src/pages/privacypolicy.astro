---
import Layouts from "../layouts/Layouts.astro";
import Header from "../components/Project/Header.astro";
import Footer from "../components/Project/Footer.astro";
import SectionHeaderTitle2 from "../components/Project/SectionHeaderTitle2.astro";
import { Image } from "astro:assets";
import "../styles/front.css";

import headerArrowImg from "../assets/images/common/header_arrow.webp";
import privacyHeaderImg from "../assets/images/common/image6.webp";

import PrivacyJa from "../components/Project/privacypolicy/PrivacyJa.astro";
import PrivacyEn from "../components/Project/privacypolicy/PrivacyEn.astro";
import PrivacyKo from "../components/Project/privacypolicy/PrivacyKo.astro";

import ja from "../locales/ja/translation.json";
import en from "../locales/en/translation.json";
import ko from "../locales/ko/translation.json";

const locales = { ja, en, ko };
type Locale = keyof typeof locales;

const url = new URL(Astro.request.url);
const queryLang = url.searchParams.get("lang") as Locale;

const locale: Locale = locales[queryLang] ? queryLang : "ja";
const t = locales[locale];
---

<Layouts title={t.common.layout_title}>
  <Header t={t} locale={locale} />
  
  <main>
  <div class="relative overflow-hidden">
    <SectionHeaderTitle2 
      title={t.common.nav_privacy} 
      subTitle="privacy policy" 
    >
      <div slot="default" class="mt-20 md:mt-18">
        <span
          data-animation="slideLeft"
          class="text-white block leading-[1.8] md:leading-relaxed whitespace-pre-wrap -translate-y-4 md:-translate-y-4 opacity-0"
        >
          {/* テキストが必要な場合はここに入力 */}
        </span>
      </div>

      <Image
        slot="img"
        src={privacyHeaderImg}
        alt=""
        class="max-h-full h-full w-auto object-cover ml-auto my-auto relative z-10"
        data-animation="slideRight"
      />
    </SectionHeaderTitle2>

    <Image
      src={headerArrowImg}
      alt=""
      class="absolute top-[25%] right-[10%] -translate-y-1/2 translate-x-1/3 z-20 w-[56%] h-auto"
      data-animation="slideLeft"
    />
  </div>

  <section class="py-20 front-container mx-auto max-w-[1200px] px-[4%]">
    <div class="privacy-content">
      {locale === "ja" && <PrivacyJa />}
      {locale === "en" && <PrivacyEn />}
      {locale === "ko" && <PrivacyKo />}
    </div>
    
    <div class="text-center mt-20">
      <a 
        href={locale === 'ja' ? '/' : `/?lang=${locale}`} 
        class="inline-block bg-black text-white px-12 py-4 rounded-full font-bold hover:opacity-80 transition-opacity"
      >
        {locale === 'ja' ? 'トップへ戻る' : locale === 'ko' ? '톱으로 돌아가기' : 'Back to Top'}
      </a>
    </div>
  </section>
</main>

  <Footer t={t} locale={locale} />
</Layouts>

<style>
  .privacy-content {
    font-size: 16px;
    line-height: 1.8;
    color: #333;
  }
  :global(.privacy-content h2) { 
    font-size: clamp(1.5rem, 1rem + 2vw, 2.25rem); 
    margin-bottom: 40px; 
    font-weight: bold; 
  }
  :global(.chapter-title) { margin-top: 40px; font-weight: bold; font-size: 1.2rem; }
  :global(.section-text) { margin-bottom: 20px; }
  :global(.numbered-list) { list-style-type: none; padding-left: 0; }
  :global(.numbered-list li) { margin-bottom: 10px; }
  :global(address) { font-style: normal; margin-top: 40px; padding-top: 20px; border-top: 1px solid #eee; }
</style>
<style is:global>
  /* 余計な最適化コードをすべて捨てて、これだけにしてください */
  .main-header a, .main-header span, .main-header div { color: #ffffff !important; }
  header .lang-switcher, header .current-lang, header [class*="icon"] { color: #ffffff !important; }
  .main-header.is-scrolled { background-color: rgba(0, 0, 0, 0.85) !important; }
  .header-center a.text-gray-400 { color: rgba(255, 255, 255, 0.5) !important; font-weight: normal !important; }
  .header-center a.font-bold { color: #ffffff !important; font-weight: 800 !important; border-bottom: 2px solid #ffffff !important; }
</style>


<script src="../lib/front.ts"></script>